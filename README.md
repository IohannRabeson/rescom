# rescom [![CMake](https://github.com/IohannRabeson/rescom/actions/workflows/cmake.yml/badge.svg)](https://github.com/IohannRabeson/rescom/actions/workflows/cmake.yml)

C++ resource compiler using CMake

 - Tested on Windows, Linux and OSX
 - Resources can be used at compile time
 - Easy to use with CMake
 - Constexpr

## Requirements
 - C++ compiler with minimal C++20 support
 - CMake 3.9 or later

## Tutorial

 1 - Add this repository as submodule and use `add_subdirectory`:
 ```cmake
    add_subdirectory(rescom)
```
 2 - Create a folder for the resources in your project, add it few files and list them in a text file:
 ```shell
mkdir resources && cat "content.txt" > resources/rescom.list && cat "Hello world!" > content.txt
```
 3 - In the CMakeLists.txt of your project, enable rescom:
 ```cmake
    add_executable(your_project main.cpp)
    # This line enable rescom, all the files listed in rescom.list will
    # be embedded into the executable.
    rescom_compile(your_project resources/rescom.list)
```
 4 - You can now load the text file:
 ```c++
// This file is generated by rescom.
// The CMake function rescom_compile make it available.
#include <rescom.hpp> 
#include <iostream>
#include <string>

int main() {
    rescom::Resource const& resource = rescom::getResource("content.txt");
    std::string_view const text(resource.bytes, resource.size);
    std::cout << text << "\n";
    return 0;
}
 ```

The structure `rescom::Resource` contains the following fields: 
```c++
// The unique key, it's the path of the file relative to the resources file list
char const* const key;
// Data of the resource. This address will never change during runtime.
char const* const bytes;
// Count of bytes
unsigned int const size;
```

You can see complete examples in the `tests` directory.