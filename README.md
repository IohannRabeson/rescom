# rescom [![CMake](https://github.com/IohannRabeson/rescom/actions/workflows/cmake.yml/badge.svg)](https://github.com/IohannRabeson/rescom/actions/workflows/cmake.yml)

C++ resource compiler using CMake to embed files into the executable

 - Tested on Windows, Linux and OSX
 - Generated code does not produce warnings
 - Resources can be used at compile time (rescom::getResource is constexpr)
 - Easy to use and integrate with CMake

## Requirements
 - C++ compiler with C++17 support
 - CMake 3.9 or later

## How to clone
Mind to also clone submodules with option `--recursive`:
```shell
git clone --recursive git@github.com:IohannRabeson/rescom.git
```
If you missed it, you can ensure all the submodules are properly cloned with:
```shell
cd rescom && git submodule update --init --recursive
```
If you use `rescom` as submodule:
```shell
git submodule add git@github.com:IohannRabeson/rescom.git
git submodule update --init --recursive
```

## Tutorial

 1 - Add this repository as submodule and use `add_subdirectory` in your CMakeLists.txt:
 ```cmake
    add_subdirectory(rescom)
```
 2 - Create a folder for the resources in your project, add it few files and list them in a text file.  
The file `rescom.list` contains the files to embed, on file per line, the path must be relative to
the directory of the list file:  
 ```shell
mkdir resources && cat "content.txt" > resources/rescom.list && cat "Hello world!" > content.txt
```
 3 - In the CMakeLists.txt of your project, enable rescom:
 ```cmake
    add_executable(your_project main.cpp)
    # This line enable rescom, all the files listed in rescom.list will
    # be embedded into the executable.
    rescom_compile(your_project resources/rescom.list)
```
 4 - You can now load the text file:
 ```c++
// `rescom.hpp` is generated by rescom driven by CMake.
#include <rescom.hpp>  

#include <iostream>
#include <string>

int main() {
    rescom::Resource const& resource = rescom::getResource("content.txt");
    std::string_view const text(resource.bytes, resource.size);
    std::cout << text << "\n";
    return 0;
}
 ```

The structure `rescom::Resource` contains the following fields: 
```c++
// The unique key, it's the path of the file relative to the resources file list
char const* const key;
// Data of the resource. This address will never change during runtime.
char const* const bytes;
// Count of bytes
unsigned int const size;
```

You can see complete examples in the `tests` directory.

## How to build tests
You must set the CMake variable `RESCOM_TEST` to `ON`.

